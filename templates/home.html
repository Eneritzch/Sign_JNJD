{% extends 'base.html' %}
{% load static %}

{% block title %}SignDetector{% endblock %}

{% block content %}

<!-- Background Elements -->
<div class="gradient-bg"></div>
<div class="fixed inset-0 pointer-events-none overflow-hidden" style="z-index: 0;">
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>
    <div class="orb orb-3"></div>
</div>

<!-- Main Container -->
<div class="hero-container max-w-7xl mx-auto px-6 py-16">
    
    <!-- Hero Section -->
    <div class="text-center mb-20 float-animation">
        <h1 class="text-2xl md:text-5xl font-black mb-6 leading-tight">
            <span class="gradient-text">ARQUITECTURAS CNN</span>
        </h1>
        
        <h2 class="text-3xl md:text-4xl font-light text-gray-600 mb-12 tracking-wide">
            ENTRENADAS
        </h2>

        <p class="text-xl text-gray-600 max-w-3xl mx-auto leading-relaxed mb-12">
            Descubre el poder del aprendizaje profundo con arquitecturas de vanguardia. 
            Precisión sin precedentes en reconocimiento de lenguaje de señas.
        </p>
    </div>

    <!-- Performance Analytics Section -->
    <div class="glass-card rounded-3xl p-12 hover-lift depth-shadow mb-20">
        <div class="max-w-5xl mx-auto">
            <div class="text-center mb-12">
                <div class="inline-block detection-badge text-white px-6 py-2 rounded-full mb-6">
                    <span class="text-sm font-bold uppercase tracking-wider">Análisis de Rendimiento</span>
                </div>
                <h2 class="text-4xl md:text-5xl font-black mb-4">
                    <span class="gradient-text">Comparativa de Modelos</span>
                </h2>
            </div>

            <!-- Chart Container -->
            <div class="bg-white bg-opacity-50 rounded-2xl p-8 backdrop-blur-sm">
                <canvas id="performanceChart" style="max-height: 400px;"></canvas>
            </div>

            <!-- Stats Grid -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-12">
                <div class="stat-card rounded-2xl p-6 text-center">
                    <div class="text-4xl font-black mb-2" style="color: #8b7a9e;">78.30%</div>
                    <div class="text-sm text-gray-600 uppercase tracking-wider">Mejor Precisión</div>
                    <div class="text-xs text-gray-500 mt-2">MobileNetV2 FT</div>
                </div>
                <div class="stat-card rounded-2xl p-6 text-center">
                    <div class="text-4xl font-black mb-2" style="color: #baa4cb;">4</div>
                    <div class="text-sm text-gray-600 uppercase tracking-wider">Modelos Entrenados</div>
                </div>
                <div class="stat-card rounded-2xl p-6 text-center">
                    <div class="text-4xl font-black mb-2" style="color: #a99cc3;">80.97%</div>
                    <div class="text-sm text-gray-600 uppercase tracking-wider">Precisión Promedio</div>
                    <div class="text-xs text-gray-500 mt-2">Todos los modelos</div>
                </div>
            </div>
        </div>
    </div>

    <!-- YOLO Section -->
    <div class="glass-card rounded-3xl p-12 hover-lift depth-shadow text-center mb-2">
        <div class="max-w-3xl mx-auto" style="color: #6b5b7a;">
            <div class="inline-block detection-badge text-white px-6 py-2 rounded-full mb-6">
                <span class="text-sm font-bold uppercase tracking-wider">Detección en Tiempo Real</span>
            </div>
            
            <h2 class="text-4xl md:text-5xl font-black mb-4">
                <span class="gradient-text">MediaPipe</span>
            </h2>
            
            <p class="text-lg text-gray-600 mb-8">Optimizando el reconocimiento de señas con visión avanzada</p>
            
            <div class="grid grid-cols-3 gap-8 mt-12 mb-12">
                <div class="pulse-animation">
                    <div class="text-4xl font-black mb-2" style="color: #baa4cb;">
                        <svg class="w-10 h-10 mx-auto" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h5v8l-2.5-1.5L6 12V4z"/>
                        </svg>
                    </div>
                    <div class="text-sm text-gray-600 uppercase tracking-wider">Abecedario</div>
                </div>
                <div class="pulse-animation" style="animation-delay: 1s;">
                    <div class="text-4xl font-black mb-2" style="color: #a99cc3;">
                        <svg class="w-10 h-10 mx-auto" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M4 4h16a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H7l-4 3v-3H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2zM6 8h12v2H6V8zm0 4h8v2H6v-2z"/>
                        </svg>
                    </div>
                    <div class="text-sm text-gray-600 uppercase tracking-wider">Saludos</div>
                </div>
                <div class="pulse-animation" style="animation-delay: 2s;">
                    <div class="text-4xl font-black mb-2" style="color: #8b7a9e;">
                        <svg class="w-10 h-10 mx-auto" fill="currentColor" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="10"/>
                            <circle cx="8.5" cy="9.5" r="1.5" fill="white"/>
                            <circle cx="15.5" cy="9.5" r="1.5" fill="white"/>
                            <path d="M8 15c0-2.21 1.79-4 4-4s4 1.79 4 4" stroke="white" stroke-width="1.5" fill="none" stroke-linecap="round"/>
                        </svg>
                    </div>
                    <div class="text-sm text-gray-600 uppercase tracking-wider">Emociones</div>
                </div>
            </div>
            
            <!-- CTA Buttons -->
            <div class="flex flex-col sm:flex-row gap-4 justify-center">
                <a href="{% url 'recognition:static' %}" class="cta-primary px-8 py-4 rounded-2xl text-white font-bold hover-lift depth-shadow relative z-10 flex items-center justify-center gap-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                    </svg>
                    Comenzar Reconocimiento
                </a>
            </div>
        </div>
    </div>
</div>

<!-- Chart.js Library -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>

<!-- Performance Chart Script -->
<script>
    // Cargar datos reales del JSON de comparación
    fetch('{% static "data/comparison_final_results.json" %}')
        .then(response => response.json())
        .then(data => {
            // Procesar datos del JSON
            const models = Object.keys(data);
            const accuracies = models.map(model => (data[model].accuracy * 100).toFixed(2));
            const losses = models.map(model => data[model].loss.toFixed(3));
            
            const ctx = document.getElementById('performanceChart').getContext('2d');
            
            const chart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: models,
                    datasets: [
                        {
                            label: 'Precisión (%)',
                            data: accuracies,
                            backgroundColor: [
                                'rgba(186, 164, 203, 0.8)',
                                'rgba(169, 156, 195, 0.8)',
                                'rgba(139, 122, 158, 0.8)'
                            ],
                            borderColor: [
                                'rgba(186, 164, 203, 1)',
                                'rgba(169, 156, 195, 1)',
                                'rgba(139, 122, 158, 1)'
                            ],
                            borderWidth: 2,
                            borderRadius: 8,
                            hoverBackgroundColor: [
                                'rgba(186, 164, 203, 1)',
                                'rgba(169, 156, 195, 1)',
                                'rgba(139, 122, 158, 1)'
                            ],
                            yAxisID: 'y'
                        },
                        {
                            label: 'Loss',
                            data: losses,
                            backgroundColor: [
                                'rgba(107, 91, 122, 0.6)',
                                'rgba(181, 163, 201, 0.6)',
                                'rgba(154, 138, 176, 0.6)'
                            ],
                            borderColor: [
                                'rgba(107, 91, 122, 1)',
                                'rgba(181, 163, 201, 1)',
                                'rgba(154, 138, 176, 1)'
                            ],
                            borderWidth: 2,
                            borderRadius: 8,
                            hoverBackgroundColor: [
                                'rgba(107, 91, 122, 1)',
                                'rgba(181, 163, 201, 1)',
                                'rgba(154, 138, 176, 1)'
                            ],
                            yAxisID: 'y1'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    interaction: {
                        mode: 'index',
                        intersect: false
                    },
                    plugins: {
                        legend: {
                            display: true,
                            labels: {
                                font: {
                                    size: 14,
                                    weight: 'bold',
                                    family: "'Inter', sans-serif"
                                },
                                color: '#6b5b7a',
                                padding: 20,
                                usePointStyle: true
                            }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(107, 91, 122, 0.95)',
                            padding: 12,
                            titleFont: {
                                size: 14,
                                weight: 'bold'
                            },
                            bodyFont: {
                                size: 13
                            },
                            borderColor: 'rgba(186, 164, 203, 0.5)',
                            borderWidth: 2,
                            displayColors: true,
                            callbacks: {
                                label: function(context) {
                                    if (context.datasetIndex === 0) {
                                        return context.dataset.label + ': ' + context.parsed.y + '%';
                                    } else {
                                        return context.dataset.label + ': ' + context.parsed.y;
                                    }
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            type: 'linear',
                            display: true,
                            position: 'left',
                            beginAtZero: true,
                            max: 100,
                            title: {
                                display: true,
                                text: 'Precisión (%)',
                                font: {
                                    size: 12,
                                    weight: 'bold'
                                },
                                color: '#6b5b7a'
                            },
                            ticks: {
                                font: {
                                    size: 12,
                                    family: "'Inter', sans-serif"
                                },
                                color: '#6b5b7a',
                                callback: function(value) {
                                    return value + '%';
                                }
                            },
                            grid: {
                                color: 'rgba(186, 164, 203, 0.2)',
                                drawBorder: false
                            }
                        },
                        y1: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Loss',
                                font: {
                                    size: 12,
                                    weight: 'bold'
                                },
                                color: '#6b5b7a'
                            },
                            ticks: {
                                font: {
                                    size: 12,
                                    family: "'Inter', sans-serif"
                                },
                                color: '#6b5b7a'
                            },
                            grid: {
                                drawOnChartArea: false,
                                drawBorder: false
                            }
                        },
                        x: {
                            ticks: {
                                font: {
                                    size: 12,
                                    weight: '600',
                                    family: "'Inter', sans-serif"
                                },
                                color: '#6b5b7a'
                            },
                            grid: {
                                display: false,
                                drawBorder: false
                            }
                        }
                    }
                }
            });

            // Animación de entrada
            const canvas = document.getElementById('performanceChart');
            canvas.style.opacity = '0';
            canvas.style.transition = 'opacity 0.6s ease-in-out';
            
            setTimeout(() => {
                canvas.style.opacity = '1';
            }, 100);
        })
        .catch(error => console.error('Error cargando datos:', error));
</script>

{% endblock %}